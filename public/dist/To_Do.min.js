function render_tasks(){$.ajax({url:base_url+"/show_tasks",type:"GET",success:function(e){if(console.log("tasks retrieved successfully"),e)for(var t,a=JSON.parse(e),s=0;s<a.length;s++)t=htmlEscape(a[s].title),$(todo_container).append("  <div class='checkbox' id='"+a[s].id+"'><label><input type='checkbox' class='task_check'> "+t+"</label></div>"),activate_delete_task_functionality()},error:function(){console.log("error: cannot retrieve tasks!")}})}function add_task(){var e,t=$("#task").val();if(t){$("#add_task_button").attr("disabled","disabled"),$("#add_task_button").html("<i class='fa fa-spinner fa-pulse'></i> adding..");var a=htmlEscape(t);$.ajax({url:base_url+"/add_task",data:"title="+t,type:"POST",success:function(t){console.log("task saved"),e=t,$(todo_container).append("  <div class='checkbox' id='"+e+"'><label><input type='checkbox' class='task_check'>"+a+"</label></div>"),console.log("id of new task div: ",e),$("#add_task_button").html("<i class='fa fa-plus'></i> add"),$("#add_task_button").removeAttr("disabled"),$("#task").val(""),activate_delete_task_functionality()},error:function(){console.log("error: task not saved!")}})}else console.log("no task entered!")}function activate_delete_task_functionality(){$(".task_check").click(function(){id=$(this).closest("div").attr("id"),console.log("id of task removed: ",id),$.ajax({type:"POST",url:base_url+"/delete_task",data:"id="+id,success:function(e){console.log("deleted task Successfully")},error:function(){console.log("update failed!")}}),$(this).closest("div").remove()})}function htmlEscape(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}$(document).ready(function(){render_tasks(),$("#add_task_button").unbind("click").on("click",function(){add_task()}),$("#task").keypress(function(e){var t=e.keyCode?e.keyCode:e.which;return"13"==t?(add_task(),!1):void 0})});var todo_container="#To_Do";