function check(e,a){var t=0;for(var s in a)a[s].hasOwnProperty(e)&&t++;return t}function add_logo(e,a){var t=document.createElement("img");t.src="/img/"+e+".png",t.onload=function(){$(a).prepend('<img src="'+t.src+'"/>')},t.onerror=function(){console.log("logo not found!")}}function update_score(e){var a,t,s;if($("#cricket-1 .loader").remove(),null!==document.getElementById("no-game-message")&&$("#no-game-message").remove(),null!==document.getElementById(e.mid)?$("#"+e.mid+" tbody").empty():$("#cricket-1").append('<div id="'+e.mid+'" ><p class="series_name">'+e.series.series_name+'</p><table class="table"><tbody></tbody></table></div><hr>'),Array.isArray(e.past_ings)){for(a=0;2>a;a++)if(0===e.teams[a].i.localeCompare(e.past_ings[0].s.a.i)){t=e.teams[a].flag.roundstd?e.teams[a].flag.roundstd:e.teams[a].logo.small,$("#"+e.mid+" tbody").append('<tr><td class = "teams batting"><img src="'+t+'"></img>'+e.teams[a].fn+'</td><td class="score"> '+e.past_ings[0].s.a.r+"/"+e.past_ings[0].s.a.w+" ("+e.past_ings[0].s.a.o+")</td></tr>"),s=0===a?1:0,t=e.teams[s].flag.roundstd?e.teams[s].flag.roundstd:e.teams[s].logo.small,$("#"+e.mid+" tbody").append('<tr><td class = "teams bowling"><img src="'+t+'"></img>'+e.teams[s].fn+'</td><td class="score" > '+e.past_ings[1].s.a.r+"/"+e.past_ings[1].s.a.w+" ("+e.past_ings[1].s.a.o+")</td></tr>");break}}else for(a=0;2>a;a++)if(0===e.teams[a].i.localeCompare(e.past_ings.s.a.i)){t=e.teams[a].flag.roundstd?e.teams[a].flag.roundstd:e.teams[a].logo.small,$("#"+e.mid+" tbody").append('<tr><td class = "teams batting"><img src="'+t+'"></img>'+e.teams[a].fn+'</td><td class="score"> '+e.past_ings.s.a.r+"/"+e.past_ings.s.a.w+" ("+e.past_ings.s.a.o+")</td></tr>"),s=0===a?1:0,t=e.teams[s].flag.roundstd?e.teams[s].flag.roundstd:e.teams[s].logo.small,$("#"+e.mid+" tbody").append('<tr><td class = "teams bowling"><img src="'+t+'"></img>'+e.teams[s].fn+'</td><td class="score" style="opacity:0.5;"> yet to bat</td></tr>');break}}$(function(){var e=["select * from cricket.past_matches","select * from cricket.upcoming_matches"],a=[".past-matches",".upcoming-matches"];e.forEach(function(e,t){$.ajax({url:"https://query.yahooapis.com/v1/public/yql",jsonp:"callback",dataType:"jsonp",data:{q:e,env:"store://0TxIGQMQbObzvU4Apia0V0",format:"json"},success:function(e){console.log(e);for(var s,o,r=e.query.results,l=0;l<e.query.count;l++){s=0===l?"active":"",o=moment(r.Match[l].StartDate).format("dddd, D MMMM, h:mm A"),venue=r.Match[l].Venue.content,$(a[t]+" .carousel-inner").append('<div class="item '+s+'"><table class="table-'+l+' table"><tbody class="body"></tbody></table></div>');for(var n=0;n<r.Match[l].Team.length;n++)add_logo(r.Match[l].Team[n].Team,a[t]+" .table-"+l+" .body ."+l+n+" td:first-child"),$(a[t]+"  .carousel-inner .table-"+l+" .body").append('<tr class="'+l+n+'"><td>'+r.Match[l].Team[n].Team+"</td></tr>");if(r.Match[l].Result){if("abandoned"!=r.Match[l].Result.how){if("drawn"==r.Match[l].Result.how)$(a[t]+" .table-"+l+" .body ."+l+0).append('<td rowspan="2" style="vertical-align:middle" class="game-result">Match Drawn</td>');else for(var c=0;c<r.Match[l].Team.length;c++)if(r.Match[l].Result.Team[c].matchwon.localeCompare("yes"))for(var i=0;i<r.Match[l].Team.length;i++)r.Match[l].Team[i].teamid.localeCompare(r.Match[l].Result.Team[c].id)&&$(a[t]+" .body ."+l+0).append('<td rowspan="2" style="vertical-align:middle" class="game-result">'+r.Match[l].Team[i].Team+" won by "+r.Match[l].Result.by+" "+r.Match[l].Result.how+"</td>")}else $(a[t]+" .table-"+l+" .body ."+l+0).append('<td rowspan="2" style="vertical-align:middle" class="game-result">Match was abandoned</td>');$(a[t]+" .table-"+l+" .body ."+l+0).append('<td rowspan="2" style="vertical-align:middle" class="col-md-5 text-muted">'+r.Match[l].series_name+"<br><span>"+r.Match[l].MatchNo+"</span><br><span>"+o+"</span><br><span>"+venue+"</span></td>")}else $(a[t]+" .table-"+l+" .body ."+l+0).append('<td rowspan="2" style="vertical-align:middle" class="col-md-5 text-muted">'+r.Match[l].series_name+"<br><span>"+r.Match[l].MatchNo+"</span><br><span>"+o+"</span><br><span>"+venue+"</span></td>")}}})});var t;$(".carousel-control").on("click",function(){t=$(this).attr("href")}),$(".carousel").carousel({wrap:!1}).on("slid.bs.carousel",function(){return curSlide=$(t+" .active"),curSlide.is(" :first-child")?void $(t+" .left").hide():($(t+" .left").show(),curSlide.is(":last-child")?void $(t+" .right").hide():void $(t+" .right").show())})}),window.setInterval(function(){var e=["select * from cricket.scorecard.live.summary"];e.forEach(function(e,a){$.ajax({url:"https://query.yahooapis.com/v1/public/yql",jsonp:"callback",dataType:"jsonp",data:{q:e,env:"store://0TxIGQMQbObzvU4Apia0V0",format:"json"},success:function(e){console.log(e);var a=e.query.results;if(e.query.count>0){var t,s,o,r=a.Scorecard;if(Array.isArray(r))for(var l=0;l<r.length;l++)t=r[l].teams,s=r[l].past_ings,o=check("flag",t),null!==t&&null!==s?2===o?update_score(r[l]):console.log("error fetchin flag in livescore"):console.log("error fetching livescore");else{if(t=r.teams,s=r.past_ings,o=check("flag",t),null===t||null===s)return void console.log("error fetching livescore");if(2!==o)return void console.log("error fetchin flag in livescore");update_score(r)}}else 0===e.query.count&&($("#cricket-1 .loader").remove(),$("#cricket-1").empty(),$("#cricket-1").append('<p id="no-game-message">no games in progress</p>'))}})})},1e4);